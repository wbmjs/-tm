name: 火種 VPN 連結提取器

on:
  schedule:
    - cron: '0 */6 * * *'          # 每 6 小時執行一次（可改成 '0 0 * * *' 每天 UTC 00:00）
  workflow_dispatch:               # 允許你手動在 GitHub 點「Run workflow」觸發

jobs:
  extract-links:
    runs-on: ubuntu-latest         # 使用最新的 Ubuntu 環境

    steps:
    - name: 拉取程式碼
      uses: actions/checkout@v4

    - name: 設定 Python 環境
      uses: actions/setup-python@v5
      with:
        python-version: '3.12'     # 或 '3.11'、'3.x' 都可以

    - name: 安裝依賴套件
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: 執行提取腳本
      env:
        HUOZHONG_USERNAME:     ${{ secrets.HUOZHONG_USERNAME }}
        HUOZHONG_PASSWORD:     ${{ secrets.HUOZHONG_PASSWORD }}
        HUOZHONG_CLIENT_ID:    ${{ secrets.HUOZHONG_CLIENT_ID }}
        HUOZHONG_CLIENT_SECRET: ${{ secrets.HUOZHONG_CLIENT_SECRET }}
      run: python 火种.py

    - name: 顯示執行結果（連結會出現在 log 裡）
      if: always()                 # 無論成功失敗都顯示
      run: echo "請查看上面的 log 輸出連結，或檢查是否有錯誤"
